import{$ as j,Aa as c,I,Ka as Ce,N as w,Na as he,Q as A,S as se,T as le,U as ce,V as de,W as R,X as g,Y as D,Z as V,_ as B,a as me,aa as G,b as O,ba as q,c as pe,ca as ue,d as h,da as M,e as z,fa as ge,g as s,ga as k,h as l,ha as y,i as S,ia as fe,j as T,ja as f,k as d,ka as H,l as p,la as U,ma as W,n as o,na as Y,o as r,oa as ve,p as u,pa as Z,q as v,qa as J,r as _,ra as K,s as x,t as b,ta as Q,u as C,ua as N,va as X,w as E,wa as F,x as i,xa as $,ya as _e,za as ee}from"./chunk-X7NDSUYR.js";var ze=["http://localhost:8080"],P=class e{constructor(t){this.htpp=t}register(t){return this.htpp.post(ze+"/api/auth/signup",t)}login(t){return this.htpp.post(ze+"/api/auth/login",t)}static \u0275fac=function(n){return new(n||e)(pe(se))};static \u0275prov=me({token:e,factory:e.\u0275fac,providedIn:"root"})};function Le(e,t){e&1&&(v(0),i(1," Password is required! "),_())}function Oe(e,t){e&1&&(v(0),i(1," Password must contain 8 characters, 1 lowercase, 1 uppercase, 1 number, and 1 special character. "),_())}function Te(e,t){if(e&1&&d(0,Le,2,0,"ng-container",20)(1,Oe,2,0,"ng-container",20),e&2){let n,a,m=C();p("ngIf",(n=m.signupForm.get("password"))==null?null:n.hasError("required")),s(),p("ngIf",(a=m.signupForm.get("password"))==null?null:a.hasError("pattern"))}}function Ae(e,t){e&1&&(v(0),i(1," Please confirm your password! "),_())}function Re(e,t){e&1&&(v(0),i(1," Passwords do not match! "),_())}function De(e,t){if(e&1&&d(0,Ae,2,0,"ng-container",20)(1,Re,2,0,"ng-container",20),e&2){let n,a,m=C();p("ngIf",(n=m.signupForm.get("checkPassword"))==null?null:n.hasError("required")),s(),p("ngIf",(a=m.signupForm.get("checkPassword"))==null?null:a.hasError("confirm"))}}var te=class e{constructor(t,n,a,m){this.fb=t;this.authService=n;this.message=a;this.router=m}isSpinning=!1;signupForm;ngOnInit(){this.signupForm=this.fb.group({name:[null,[g.required]],email:[null,[g.required,g.email]],password:[null,[g.required]],checkPassword:[null,[g.required,this.confirmationValidate]]})}confirmationValidate=t=>{if(t.value){if(t.value!==this.signupForm.controls.password.value)return{confirm:!0,error:!0}}else return{required:!0};return{}};register(){this.signupForm.valid?(this.isSpinning=!1,this.authService.register(this.signupForm.value).subscribe(t=>{t&&t.id?(this.message.success("Signup Successful",{nzDuration:5e3}),this.router.navigateByUrl("/login")):this.message.error("Something went wrong",{nzDuration:5e3}),this.isSpinning=!1},t=>{this.message.error("Registration failed. Please try again.",{nzDuration:5e3}),console.error(t),this.isSpinning=!1})):console.error("Form is invalid")}static \u0275fac=function(n){return new(n||e)(l(q),l(P),l(ee),l(k))};static \u0275cmp=S({type:e,selectors:[["app-signup"]],decls:32,vars:7,consts:[["passwordError",""],["confirmPasswordError",""],[1,"bg",2,"background-color","#F0F2F5"],["nzTip","Working...",3,"nzSpinning","nzSize"],[1,"parent"],[1,"child"],["nz-row","",1,"imgDiv"],["nz-col","","nzSpan","24"],[1,"form-header"],["nz-form","",3,"formGroup"],["nzHasFeedback","","nzErrorTip","The input is not valid E-mail!"],["nz-input","","placeholder","E-mail","id","email","formControlName","email"],["nzHasFeedback","",3,"nzErrorTip"],["nz-input","","placeholder","Password","type","password","id","password","formControlName","password"],["nz-input","","placeholder","Confirm Password","type","password","id","checkPassword","formControlName","checkPassword"],["nzHasFeedback","","nzErrorTip","Please input your username!"],["nz-input","","placeholder","Name","id","username","formControlName","name"],["nz-button","",1,"login-form-button","login-form-margin",3,"click","nzType","disabled"],[1,"form-footer"],["routerLink","/login",1,"form-footer"],[4,"ngIf"]],template:function(n,a){if(n&1){let m=x();o(0,"div",2)(1,"nz-spin",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h1",8),i(7,"Sign Up"),r()()(),o(8,"form",9)(9,"nz-form-item")(10,"nz-form-control",10),u(11,"input",11),r()(),o(12,"nz-form-item")(13,"nz-form-control",12),u(14,"input",13),d(15,Te,2,2,"ng-template",null,0,I),r()(),o(17,"nz-form-item")(18,"nz-form-control",12),u(19,"input",14),d(20,De,2,2,"ng-template",null,1,I),r()(),o(22,"nz-form-item")(23,"nz-form-control",15),u(24,"input",16),r()(),o(25,"button",17),b("click",function(){return h(m),z(a.register())}),i(26," Register "),r(),o(27,"div")(28,"p",18),i(29,"Or "),o(30,"a",19),i(31,"login now!"),r()()()()()()()()}if(n&2){let m=E(16),ae=E(21);s(),p("nzSpinning",a.isSpinning)("nzSize","large"),s(7),p("formGroup",a.signupForm),s(5),p("nzErrorTip",m),s(5),p("nzErrorTip",ae),s(7),p("nzType","primary")("disabled",a.signupForm.invalid)}},dependencies:[A,w,U,H,Q,Y,W,J,Z,K,$,F,N,X,M,B,R,D,V,j,G,f,y],styles:[".bg[_ngcontent-%COMP%]{background-color:#f0f2f5;padding:20px 0}.parent[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-items:center}.child[_ngcontent-%COMP%]{background-color:#fff;padding:40px;width:100%;max-width:500px;box-shadow:0 4px 12px #0000001a;border-radius:8px;transform:translateY(-10%);transition:all .3s ease}.child[_ngcontent-%COMP%]:hover{transform:translateY(0)}.form-header[_ngcontent-%COMP%]{font-size:32px;font-weight:600;color:#001529;text-align:center;margin-bottom:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}nz-form-item[_ngcontent-%COMP%]{margin-bottom:20px}nz-form-control[_ngcontent-%COMP%]{width:100%}input[nz-input][_ngcontent-%COMP%]{border-radius:4px;padding:12px;font-size:16px;border:1px solid #e0e0e0;width:100%}input[nz-input][_ngcontent-%COMP%]:focus{border-color:#1890ff;outline:none}.login-form-button[_ngcontent-%COMP%]{width:100%;background-color:#001529;color:#fff;border-radius:5px;padding:12px;font-size:16px;font-weight:700;border:none;transition:background-color .3s ease}.login-form-button[_ngcontent-%COMP%]:hover{background-color:#1890ff}.form-footer[_ngcontent-%COMP%]{text-align:center;margin-top:10px;font-size:14px;color:#6c6c6c;position:relative;z-index:1}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1890ff;text-decoration:none;position:relative;z-index:2;pointer-events:auto}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-form-button[_ngcontent-%COMP%]{z-index:1}"]})};function Ve(e,t){e&1&&(v(0),i(1," Password is required! "),_())}function Be(e,t){e&1&&(v(0),i(1," Password must contain 8 characters, 1 lowercase, 1 uppercase, 1 number, and 1 special character. "),_())}function je(e,t){if(e&1&&d(0,Ve,2,0,"ng-container",16)(1,Be,2,0,"ng-container",16),e&2){let n,a,m=C();p("ngIf",(n=m.loginForm.get("password"))==null?null:n.hasError("required")),s(),p("ngIf",(a=m.loginForm.get("password"))==null?null:a.hasError("pattern"))}}var ne=class e{constructor(t,n,a,m){this.fb=t;this.authService=n;this.message=a;this.router=m}isSpinning=!1;loginForm;ngOnInit(){this.loginForm=this.fb.group({email:[null,[g.email,g.required]],password:[null,[g.required]]})}login(){console.log("Login form submitted:",this.loginForm.value),this.authService.login(this.loginForm.value).subscribe(t=>{if(console.log(t),t.userId!=null){let n={id:t.userId,role:t.userRole};c.saveUser(n),c.saveToken(t.jwt),c.isAdminLoggedIn()?this.router.navigateByUrl("/admin/dashboard"):c.isCustomerLoggedIn()?this.router.navigateByUrl("/customer/dashboard"):this.message.error("Bad credentials",{nzDuration:5e3})}})}static \u0275fac=function(n){return new(n||e)(l(q),l(P),l(ee),l(k))};static \u0275cmp=S({type:e,selectors:[["app-login"]],decls:24,vars:6,consts:[["passwordError",""],[1,"bg",2,"background-color","#F0F2F5"],["nzTip","Working...",3,"nzSpinning","nzSize"],[1,"parent"],[1,"child"],["nz-row","",1,"imgDiv"],["nz-col","","nzSpan","24"],[1,"form-header"],["nz-form","",3,"formGroup"],["nzHasFeedback","","nzErrorTip","The input is not valid E-mail!"],["nz-input","","placeholder","E-mail","id","email","formControlName","email"],["nzHasFeedback","",3,"nzErrorTip"],["nz-input","","placeholder","Password","type","password","id","password","formControlName","password"],["nz-button","",1,"login-form-button","login-form-margin",3,"click","nzType","disabled"],[1,"form-footer"],["routerLink","/register"],[4,"ngIf"]],template:function(n,a){if(n&1){let m=x();o(0,"div",1)(1,"nz-spin",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h1",7),i(7,"Log In"),r()()(),o(8,"form",8)(9,"nz-form-item")(10,"nz-form-control",9),u(11,"input",10),r()(),o(12,"nz-form-item")(13,"nz-form-control",11),u(14,"input",12),d(15,je,2,2,"ng-template",null,0,I),r()(),o(17,"button",13),b("click",function(){return h(m),z(a.login())}),i(18," Log In "),r(),o(19,"div")(20,"p",14),i(21,"Or "),o(22,"a",15),i(23,"register now!"),r()()()()()()()()}if(n&2){let m=E(16);s(),p("nzSpinning",a.isSpinning)("nzSize","large"),s(7),p("formGroup",a.loginForm),s(5),p("nzErrorTip",m),s(4),p("nzType","primary")("disabled",a.loginForm.invalid)}},dependencies:[A,w,U,H,Q,Y,W,J,Z,K,$,F,N,X,M,B,R,D,V,j,G,f,y],styles:[".bg[_ngcontent-%COMP%]{background-color:#f0f2f5;padding:20px 0}.parent[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-items:center}.child[_ngcontent-%COMP%]{background-color:#fff;padding:40px;width:100%;max-width:500px;box-shadow:0 4px 12px #0000001a;border-radius:8px;transform:translateY(-10%);transition:all .3s ease}.child[_ngcontent-%COMP%]:hover{transform:translateY(0)}.form-header[_ngcontent-%COMP%]{font-size:32px;font-weight:600;color:#001529;text-align:center;margin-bottom:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}nz-form-item[_ngcontent-%COMP%]{margin-bottom:20px}nz-form-control[_ngcontent-%COMP%]{width:100%}input[nz-input][_ngcontent-%COMP%]{border-radius:4px;padding:12px;font-size:16px;border:1px solid #e0e0e0;width:100%}input[nz-input][_ngcontent-%COMP%]:focus{border-color:#1890ff;outline:none}.login-form-button[_ngcontent-%COMP%]{width:100%;background-color:#001529;color:#fff;border-radius:5px;padding:12px;font-size:16px;font-weight:700;border:none;transition:background-color .3s ease}.login-form-button[_ngcontent-%COMP%]:hover{background-color:#1890ff}.form-footer[_ngcontent-%COMP%]{text-align:center;margin-top:10px;font-size:14px;color:#6c6c6c}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1890ff;text-decoration:none}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var Ge=[{path:"register",component:te},{path:"login",component:ne},{path:"admin",loadChildren:()=>import("./chunk-JWFKY4ST.js").then(e=>e.AdminModule)},{path:"customer",loadChildren:()=>import("./chunk-VKQGFYKT.js").then(e=>e.CustomerModule)}],oe=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=T({type:e});static \u0275inj=O({imports:[f.forRoot(Ge),f]})};function qe(e,t){e&1&&(o(0,"div")(1,"nz-header",1)(2,"div",2)(3,"a",3),i(4,"VROOM"),r()(),o(5,"div",4)(6,"a",5),i(7,"Sign Up"),r(),o(8,"a",6),i(9,"Login"),r()()()())}function He(e,t){if(e&1){let n=x();o(0,"div")(1,"nz-header",1)(2,"div",2)(3,"a",3),i(4,"LoggedIn Admin"),r()(),o(5,"div",4)(6,"a",7),i(7,"Dashboard"),r(),o(8,"a",8),i(9,"Post Car"),r(),o(10,"a",9),i(11,"Bookings"),r(),o(12,"a",10),i(13,"Search"),r(),o(14,"a",11),b("click",function(){h(n);let m=C();return z(m.logout())}),i(15,"Logout"),r()()()()}}function Ue(e,t){if(e&1){let n=x();o(0,"div")(1,"nz-header",1)(2,"div",2)(3,"a",3),i(4,"LoggedIn Customer"),r()(),o(5,"div",4)(6,"a",12),i(7,"Dashboard"),r(),o(8,"a",13),i(9,"My Bookings"),r(),o(10,"a",14),i(11,"Search"),r(),o(12,"a",11),b("click",function(){h(n);let m=C();return z(m.logout())}),i(13,"Logout"),r()()()()}}var ie=class e{constructor(t){this.router=t}title="nstandalone";isCustomerLoggedIn=c.isCustomerLoggedIn();isAdminLoggedIn=c.isAdminLoggedIn();ngOnInit(){this.router.events.subscribe(t=>{t.constructor.name==="NavigationEnd"&&(this.isAdminLoggedIn=c.isAdminLoggedIn(),this.isCustomerLoggedIn=c.isCustomerLoggedIn())})}logout(){c.logout(),this.router.navigateByUrl("/login")}static \u0275fac=function(n){return new(n||e)(l(k))};static \u0275cmp=S({type:e,selectors:[["app-root"]],standalone:!1,decls:4,vars:3,consts:[[4,"ngIf"],[1,"custom-navbar"],[1,"navbar-title"],["routerLink","/login"],[1,"nav-links"],["nz-button","","nzType","link","routerLink","/register","routerLinkActive","active"],["nz-button","","nzType","link","routerLink","/login","routerLinkActive","active"],["nz-button","","nzType","link","routerLink","/admin/dashboard","routerLinkActive","active"],["nz-button","","nzType","link","routerLink","/admin/car","routerLinkActive","active"],["nz-button","","nzType","link","routerLink","/admin/bookings","routerLinkActive","active"],["nz-button","","nzType","link","routerLink","/admin/search","routerLinkActive","active"],["nz-button","","nzType","link","routerLinkActive","active",3,"click"],["nz-button","","nzType","link","routerLink","/customer/dashboard","routerLinkActive","active"],["nz-button","","nzType","link","routerLink","/customer/my_bookings","routerLinkActive","active"],["nz-button","","nzType","link","routerLink","/customer/car/search","routerLinkActive","active"]],template:function(n,a){n&1&&(d(0,qe,10,0,"div",0)(1,He,16,0,"div",0)(2,Ue,14,0,"div",0),u(3,"router-outlet")),n&2&&(p("ngIf",!a.isAdminLoggedIn&&!a.isCustomerLoggedIn),s(),p("ngIf",a.isAdminLoggedIn),s(),p("ngIf",a.isCustomerLoggedIn))},dependencies:[w,ge,y,fe,F,N,Ce],styles:[".custom-navbar[_ngcontent-%COMP%]{background:linear-gradient(90deg,#12814d,#003973);display:flex;justify-content:space-between;align-items:center;padding:10px 20px;height:60px;box-shadow:0 4px 6px #0000001a}.navbar-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#fff!important;text-decoration:none}.nav-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#fff;text-decoration:none;padding:8px 12px;border-radius:4px;transition:background .3s ease,color .3s ease}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#fff3;color:#ffcd3c}"]})};var re=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=T({type:e,bootstrap:[ie]});static \u0275inj=O({imports:[de,oe,M,le,_e,ve,he,ue,f]})};ce().bootstrapModule(re,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e));
